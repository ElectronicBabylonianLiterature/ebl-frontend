$highlight-color: lightsteelblue

@mixin subscript-label
  font-size: 75%
  font-weight: bold
  line-height: 0
  position: relative
  vertical-align: baseline
  bottom: -0.4em
  font-family: monospace
  padding-left: .1rem
  padding-right: .1rem

@mixin highlight-chain($depth: 1, $color: $highlight-color)
  & + span:not(.markable)
    background: $color

    @if $depth > 1
      @include highlight-chain($depth - 1, $color)

@mixin ensure-black-font
  span[class^="Transliteration__"]
    color: black !important

@mixin entity-color-scheme($entity-type, $label, $color)
  .markable[data-entity-type="#{$entity-type}"]
    background: $color

    &:not(.span-end)
      @include highlight-chain(3, $color)

    &.span-end::after
      content: "#{$label}"
      @include subscript-label

.text-annotation
  &__line-number
    ::selection
      background-color: transparent !important
      color: inherit

.markable.selected
  background: $highlight-color

  @include ensure-black-font

  &:not(.span-end)
    @include highlight-chain(3)

@include entity-color-scheme(PERSON, PERSON, lighten(sandybrown, 10%))
@include entity-color-scheme(LOCATION, LOC, lighten(mediumseagreen, 20%))

.entity-span
  @include ensure-black-font
